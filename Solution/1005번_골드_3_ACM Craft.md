# 1005번 ACM Craft

## 링크

[1005번: ACM Craft (acmicpc.net)](https://www.acmicpc.net/problem/1005)

## 제약 조건

| 제약 조건명 |   값    |
| :---------: | :-----: |
|  시간 제한  |   1초   |
| 메모리 제한 |  512MB  |
|  정답 비율  | 28.952% |

## 접근

위상 정렬과 다이나믹 프로그래밍을 통해서 임게 경로를 찾는 문제이다. 위상 정렬이란 방향 그래프(Directed Graph)에서 정점들의 선형 순서를 찾는 알고리즘이다. 특히, 방향 비순환 그래프(Directed Acyclic Graph, DAG)에서 사용한다. 위상 절렬은 그래프의 모든 간선(u, v)에 대해 정점 u가 정점 v보다 먼저 오도록 정렬하는 것을 목표로 한다. 간단히 말해서, A →B→C로 이어지는 경로와 A→D→C로 이어지는 경로가 있는 그래프의 경우, 위상정렬을 수행하고 나면 A→B→D→C와 같은 형태로 정렬된다. 위상정렬은 DAG에서만 가능하고, 순환이 있는 그래프에서는 사용할 수 없으며, 순서를 결정하는데 사용된다. 또한, A→B→D→C와 A→D→B→C처럼 여러 정렬 형태가 존재한다는 특징을 가진다. 위상 정렬의 대표적인 알고리즘으로는 Khan 알고리즘과 DFS를 이용하는 방법이 있다.

주어지는 입력을 딕셔너리(또는 연관 해시)를 사용해서 그래프를 구성한 다음에, 순서 그래프를 위상정렬하는 것으로 문제 풀이의 1단계가 끝난다. 2단계는 정렬한 그래프의 이동 순서를 가지고 임계 경로를 계산하는 것이다. 임계 경로 계산은 CPM등에서도 활용될 수 있는 기법으로, 다이나믹 프로그래밍을 응용하는 것 중 하나이다.

임계 경로를 계산하고 나면, 해당 임계 경로의 경로값(건설 시간)이 정답이 된다.

여기서 주의해야 할 점은, 문제의 입력 조건에 따라서, 시작 부분이 V자형으로 나타나는 경우가 존재할 수 있다. 예를 들어, 1→2→3과 4→5→3과 같은 형태로 건물의 건설 순서 관계가 주어질 수 있다. 이 경우를 고려해서 위상 정렬을 수행할 때 가능한 입력 시작 노드를 지정해 주어야 한다. 단순히 들어오는 입력이 없는 노드를 찾는 것으로 충분할 것이다.

또한, 입력 경로가 없는 목표 건물이 있을 수 있는데, 이 경우에는 임계 경로의 값을 해당 건물을 건설하는데 필요한 시간으로 지정해주는 작업을 거쳐야만 한다.