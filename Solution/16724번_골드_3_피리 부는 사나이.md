# 16724번 피리 부는 사나이

## 링크

[16724번: 피리 부는 사나이 (acmicpc.net)](https://www.acmicpc.net/problem/16724)

## 제약 조건

| 제약 조건명 |   값    |
| :---------: | :-----: |
|  시간 제한  |   1초   |
| 메모리 제한 |  256MB  |
|  정답 비율  | 42.497% |

## 접근

주어진 지도는 방향 그래프로 볼 수 있다. 문제의 핵심은 주어진 방향 그래프에서 사이클의 개수를 찾아내라는 것이다. 사이클을 찾아내기 위해서 DFS를 활용한 접근 방법을 사용할 수 있다. 한 가지 주의해야 할 점은, 문제에서 만약 사이클 간에 겹치는 부분이 있다면, 두 사이클을 하나의 사이클로 간주해야 한다는 것이다. 왜냐하면 두 사이클간에 겹치는 부분에 `SAFE ZONE`을 설치하는 경우가 `SAFE ZONE`의 개수를 최소화하는 것과 직접적인 연관성이 있기 때문이다.

이를 위해서는 **컴포넌트 탐색**을 사용해서 하나의 사이클 컴포넌트로 구분하는 방식을 사용할 수 있다. 일단 먼저 사이클의 감지 방법부터 살펴보도록 하자. DFS에서 사이클을 감지하기 위해서는 두 가지 방문 상태를 기억하고 있어야 한다. 단순히 방문한 상태를 나타내는 `visited`와 현재 경로 상에 있는 노드를 추적하여 사이클을 감지하는 데 사용되는 `recursive_stack`이다. 만약 탐색 도중에 현재 노드가 `recursive_stack`에 있는 노드라면, 사이클이 존재한다고 감지할 수 있다.  이 때, DFS는 모든 셀에 대해서 수행해야 한다.

DFS를 모든 셀에 대해서 수행하는 도중에, 한 번의 사이클이 감지되었을 때에만,  `cycle_count`를 한번 증가시키는 것으로 중복 사이클을 하나의 사이클로 묶어서 처리할 수 있다.

